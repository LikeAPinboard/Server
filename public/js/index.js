!function(e){function t(e){this.template=e,this.leftDelimiter="{{",this.rightDelimiter="}}",this.syntax=["obj"],this.counter=0,this.compiledTemplate=null,this.division=!0}t.leftDelimiter="{{",t.rightDelimiter="}}",t.setDelimiter=function(e,n){t.leftDelimiter=e||"{{",t.rightDelimiter=n||"}}"},t.Helpers={},t.make=function(e){return new t(e)},t.addHelper=function(e,n){t.Helpers[e]=n},t.addHelperObject=function(e){var n;for(n in e)e.hasOwnProperty(n)&&(t.Helpers[n]=e[n])},t.prototype._escape=function(e){return null===e||void 0===e?"":(e+"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},t.prototype.parse=function(e){return"function"!=typeof this.compiledTemplate&&this.compile(),this.compiledTemplate(e||{},t.Helpers,this._escape,"")},t.prototype.compile=function(){for(var e,n,i,r=new RegExp(t.leftDelimiter+"([/#@%])?(.+?)"+t.rightDelimiter,"g"),o=[],l=0,a=0;null!==(n=r.exec(this.template));)switch(e=this.template.slice(l,n.index),e&&!/^[\r\n\s]+$/.test(e)&&(o[o.length]=a>0?this.getPrefix()+this.quote(e.replace(/^[\n|\r]+|[\n|\r]+$/g,"")):this.getPrefix()+this.quote(e)),l=r.lastIndex,n[1]){case"#":o[o.length]=this.getPrefix()+this._compileHelper(n[2]);break;case"@":i=this._compileReservedVars(n[2]),i&&(o[o.length]=this.getPrefix()+i);break;case"%":o[o.length]=this.getPrefix()+this.syntax.join(".")+"."+n[2];break;case"/":"loop"===n[2]&&(this.syntax.pop(),this.counter--),o[o.length]="}",this.division=!0,a--;break;default:i=this._compileBuiltInControl(n[2]),i&&(o[o.length]=i),/^(loop|if)/.test(n[2])&&a++}return l<this.template.length&&(o[o.length]=this.getPrefix()+this.quote(this.template.slice(l))),o[o.length]=";return b;",this.compiledTemplate=new Function("obj","Helper","_e","b",o.join("")),this},t.prototype._compileHelper=function(e){var n,i=e.split(/\s+/),r=i.shift(),o=i.length,l=0;if("function"!=typeof t.Helpers[r])throw new Error('Parse Error: Helper "'+r+'" is undefined or not a function.');for(l=0;o>l;++l)n=this.getPrimitiveType(i[l]),null===n?i[l]=this.syntax.join(".")+"."+i[l]:"string"==typeof n?i[l]=this.quote(n):"number"==typeof n&&(i[l]=n);return"Helper."+r+"("+i.join(",")+")"},t.prototype._compileReservedVars=function(e){var t,n,i=!0;if("%"===e[0]&&(e=e.slice(1),i=!1),n=/^(data|index|parent)(.+)?/.exec(e),null!==n){switch(n[1]){case"data":t=this.syntax.join(".")+(n[2]||"");break;case"parent":t=this.syntax.slice(0,-1).join(".")+(n[2]||"");break;case"index":i=!1,t="i"+(this.counter-1);break;default:return}return i?"_e("+t+")":t}},t.prototype._compileBuiltInControl=function(e){var t,n,i=/^(if|else\sif|else|for|loop)(?:\s(.+))?/.exec(e);if(null===i)return this.getPrefix()+"_e("+this.syntax.join(".")+"."+e+")";switch(this.division=!0,i[1]){case"if":return";if("+this._parseCondition(i[2])+"){";case"else if":return"}else if("+this._parseCondition(i[2])+"){";case"else":return"}else{";case"loop":case"for":return n=this.counter,t=";for(var i"+n+"=0,size"+n+"=("+this.syntax.join(".")+"."+i[2]+"||[]).length; i"+n+"<size"+n+"; ++i"+n+"){",this.syntax[this.syntax.length]=i[2]+"[i"+this.counter++ +"]",t}},t.prototype.quote=function(e){return e=e.replace(/\\/g,"\\\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[']/g,"\\'"),"'"+e+"'"},t.prototype._parseCondition=function(e){for(var t,n,i=e.replace(/(!|>=?|<=?|={2,3}|[^\+]\+|[^\-]\-|\*|&{2}|\|{2})/g," $1 "),r=i.split(/\s+/),o=r.length,l=0,a=[];o>l;++l)t=r[l],/^(!|>=?|<=?|={1,3}|\+|\-|\*|&{2}|\|{2})$/.test(t)?a[a.length]=t:(n=this.getPrimitiveType(t),null===n?a[a.length]=this.syntax.join(".")+"."+t:"number"==typeof n?a[a.length]=n:"string"==typeof n&&(a[a.length]=this.quote(n)));return a.join(" ")},t.prototype.getPrimitiveType=function(e){var t;return null!==(t=/^['"](.+?)['"]$/.exec(e))?t[1]:null!==(t=/^([0-9\.]+)$/.exec(e))?-1!==t[1].indexOf(".")?parseFloat(t[1]):parseInt(t[1],10):null},t.prototype.getPrefix=function(){var e="+";return this.division===!0&&(e="b+=",this.division=!1),e},e.Retriever=t}(this),function(){function e(){this.select()}function t(e){e.preventDefault();var t=new XMLHttpRequest,i=document.createElement("div"),r=document.getElementById("js-activate-form"),o=r.querySelector("input");return""===o.value?(i.className="lap-notification error",i.appendChild(document.createTextNode("Email is required.")),r.parentNode.insertBefore(i,r),void n(i)):(t.onload=function(){var e=JSON.parse(t.responseText);400==e.code?i.className="lap-notification error":(i.className="lap-notification success",o.value=""),i.appendChild(document.createTextNode(e.message)),r.parentNode.insertBefore(i,r),n(i)},t.open("POST",r.action,!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void t.send("email="+encodeURIComponent(o.value)))}function n(e){e.addEventListener("webkitAnimationEnd",function(){e.style.display="none"})}function i(e){for(var t=e.target,n=t.parentNode;n&&"FORM"!==n.tagName;)n=n.parentNode;n&&(n.action=t.getAttribute("data-backurl"),n.submit())}function r(e,t,n){this.btn=e,this.template=Retriever.make(t.innerHTML),this.factory=n||function(){},this.layer=document.querySelector(".lap-overlay"),this.wrapper=document.createElement("div"),this.modal=null,t.parentNode.removeChild(t),this.init()}var o=document.querySelectorAll(".lap-info-value > input");[].forEach.call(o,function(t){t.addEventListener("click",e)});var l=document.getElementById("js-activate");l&&l.addEventListener("click",t);var a=document.querySelectorAll(".lap-notification");[].forEach.call(a,n);var s=document.querySelectorAll(".lap-back-button");[].forEach.call(s,function(e){e.addEventListener("click",i)}),function(e,t){if(0!==e.length){var n=e[0].parentNode,i=t[0];[].forEach.call(e,function(e){e.addEventListener("click",function(e){e.preventDefault(),n.classList.remove("pure-menu-selected"),i.classList.add("lap-hidden"),n=this.parentNode,i=document.getElementById(this.className+"-content"),n.classList.add("pure-menu-selected"),i.classList.remove("lap-hidden")})})}}(document.querySelectorAll(".lap-tabs a"),document.querySelectorAll(".lap-tab-content")),r.prototype.init=function(){this.btn.addEventListener("click",function(e){e.preventDefault();var t=this.factory()||{},n=this.template.parse(t);this.wrapper.innerHTML=n,this.modal=this.wrapper.querySelector(".lap-section"),[].forEach.call(this.modal.querySelectorAll("[data-close]"),function(e){e.addEventListener("click",this)}.bind(this)),this.layer.style.display="block",document.body.appendChild(this.modal)}.bind(this))},r.prototype.handleEvent=function(e){e.preventDefault(),e.currentTarget.removeEventListener("click",this),document.body.removeChild(this.modal),this.modal=null,this.layer.style.display="none"};var c=document.getElementById("lap-delete-account");c&&new r(c,document.getElementById("delete-account-modal"),function(){});var u=document.getElementById("lap-email-activate");u&&new r(u,document.getElementById("email-confirm-modal"),function(){return{email:document.getElementById("lap-account-emails").value}});var p=document.getElementById("lap-change-username");p&&new r(p,document.getElementById("modify-username-modal"),function(){return{userName:document.getElementById("lap-account-username").value}});var d=document.getElementById("lap-change-password");d&&new r(d,document.getElementById("password-confirm-modal"),function(){return{password:document.getElementById("lap-account-password").value,passwordConfirm:document.getElementById("lap-account-password-confirm").value}})}();